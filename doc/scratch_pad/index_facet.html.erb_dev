<%#= render 'index_header.html.erb' %>

<%#= render 'index_table.html.erb' %>

<%#= javascript_pack_tag 'rate' %>
<%= javascript_pack_tag 'facet' %>

<h4>Facet</h4>
<div id='facet' data-id="<%= @current_user_id %>">

  <%#= render 'index_footer.html.erb' %>


  <p>Category Names: "{{ category_names }}"</p>

  <p>Category select options: "{{ category_name_options }}"</p>

  <p>Rating select options: "{{ rating_options }}"</p>

  <h5>Filter movie by category</h5>
  <v-select v-model="selected_category" :options="category_name_options" label="category"></v-select>
  <hr>

  <h5>Filter movie by rating</h5>
  <v-select v-model="selected_rating" :options="rating_options" label="rating"></v-select>
  <hr>

  <hr>
  <h5>Filter movie by text</h5>
  <p>Title contains: <input v-model="search_title_txt" placeholder="Enter your search text"></p>
  <p>You typed: {{ search_title_txt }}</p>

  <p>Summary contains: <input v-model="search_summary_txt" placeholder="Enter your search text"></p>
  <p>You typed: {{ search_summary_txt }}</p>

  <hr>

  <template v-for="(movie, index) in filteredMovies" v-bind:id="movie.id">
    <h4> {{index+1}}: {{movie.title}} ({{movie.category.name}} category) </h4>
    <h5>{{movie.summary}}</h5>
    <h6> Average: {{ total_stars(movie)}} stars in total / {{ number_of_ratings(movie)}} ratings  = {{ average_rating(movie)}} average </h6>

  </template>
